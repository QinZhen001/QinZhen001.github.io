---
layout:     post
title:      "骨架屏"
date:       2018-08-20 22:31:00
author:     "Qz"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - Other
---

> “Yeah It's on. ”


## 正文
[网页链接](https://juejin.im/post/5b79a2786fb9a01a18267362?utm_source=gold_browser_extension)

首屏渲染时间(FCP)因为首屏需要请求更多内容，比原来多了更多HTTP的往返时间(RTT)，这造成了白屏，如果白屏时间过长，用户体验会大打折扣，如果用户网速差，则FCP会更长。

由此引申出一系列的优化方法，骨架屏也因此被提出。


### 生成骨架屏的方法

1. 手写HTML、CSS的方式为目标页定制骨架屏
做法可以参考[<Vue页面骨架屏注入实践>](https://segmentfault.com/a/1190000014832185)，主要思路就是使用 vue-server-renderer 这个本来用于服务端渲染的插件，用来把我们写的.vue文件处理为HTML，插入到页面模板的挂载点中，完成骨架屏的注入。这种方式不甚文明，如果页面样式改变了，还得改一遍骨架屏，增加了维护成本。


[骨架屏的样式实现参考 CodePen](https://codepen.io/janily/pen/rGqQgJ)





2. 使用图片作为骨架屏； 简单暴力，让UI同学花点功夫吧哈哈；小米商城的移动端页面采用的就是这个方法，它是使用了一个Base64的图片来作为骨架屏。





3. 自动生成并自动插入静态骨架屏
这种方法跟第一种方法类似，不过是自动生成骨架屏，可以关注下饿了么开源的插件 page-skeleton-webpack-plugin ，它根据项目中不同的路由页面生成相应的骨架屏页面，并将骨架屏页面通过 webpack 打包到对应的静态路由页面中，不过要注意的是这个插件目前只支持history方式的路由，不支持hash方式，且目前只支持首页的骨架屏，并没有组件级的局部骨架屏实现，作者说以后会有计划实现(issue9)。


----------




另外还有个插件 vue-skeleton-webpack-plugin，它将插入骨架屏的方式由手动改为自动，原理在构建时使用 Vue 预渲染功能，将骨架屏组件的渲染结果 HTML 片段插入 HTML 页面模版的挂载点中，将样式内联到 head 标签中。这个插件可以给单页面的不同路由设置不同的骨架屏，也可以给多页面设置，同时为了开发时调试方便，会将骨架屏作为路由写入router中，可谓是相当体贴了。


















作者：SHERlocked93
链接：https://juejin.im/post/5b79a2786fb9a01a18267362
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。