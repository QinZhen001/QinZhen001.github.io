---
layout:     post
title:      "微信小程序爬坑"
date:       2018-05-26 23:25:00
author:     "Qz"
header-img: "img/post-bg-2015.jpg"
catalog: true
tags:
    - 微信小程序
---

> “Yeah It's on. ”


## mpvue相关

[http://mpvue.com/mpvue/](http://mpvue.com/mpvue/)

### 不支持函数
不支持在 template 内使用 methods 中的函数。

解决方法:写在computed里


## 小程序相关

### Content-type问题

官网里面的示例代码中content-type是设置为'application/json'的，然而……！！！

但是原来是微信开发工具升级后，请求的header的Content-type写法变了，要改成:

**header: { content-type: 'json' }**

>tip: content-type 默认为 'application/json';


[网络请求之re.request 和那些坑](https://www.cnblogs.com/huangenai/p/6427911.html)



### header
header 为 application/json，接口传回来的参数要是json 格式的，否则会报500错误，接口返回来的参数是xml则header['content-type'] 要设置为'application/x-www-form-urlencoded'


### method 
**需大写**

有效值：OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT 	


### data 数据说明
* 对于 GET 方法的数据，会将数据转换成 query string（encodeURIComponent(k)=encodeURIComponent(v)&encodeURIComponent(k)=encodeURIComponent(v)...）
* 对于 POST 方法且 header['content-type'] 为 application/json 的数据，会对数据进行 JSON 序列化
* 对于 POST 方法且 header['content-type'] 为 application/x-www-form-urlencoded 的数据，会将数据转换成 query string （encodeURIComponent(k)=encodeURIComponent(v)&encodeURIComponent(k)=encodeURIComponent(v)...）










